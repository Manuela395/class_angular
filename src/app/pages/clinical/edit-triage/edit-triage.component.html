<div class="edit-triage-container">
  <div class="header">
    <h2>{{ isReadOnly ? 'DETALLE DEL TRIAGE' : 'ACTUALIZAR TRIAGE' }}</h2>
    <p>{{ isReadOnly ? 'Consulta la información registrada del triage médico.' : 'Modifica la información del triage médico.' }}</p>
  </div>

  <div class="form-card">
    <div class="form-group">
      <label for="appointment">Cita *</label>
      <select id="appointment" [(ngModel)]="triage.appointment_id" [disabled]="isReadOnly">
        <option value="">Seleccione una cita</option>
        <option *ngFor="let apt of appointments" [value]="apt.id">
          {{ apt.patient?.name }} {{ apt.patient?.last_name }} - {{ apt.date_appointment }} {{ apt.hour_appointment }}
        </option>
      </select>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="height">Altura (cm)</label>
        <input
          id="height"
          type="number"
          [(ngModel)]="triage.height_cm"
          placeholder="Ej: 170"
          [readonly]="isReadOnly"
        />
      </div>

      <div class="form-group">
        <label for="weight">Peso (kg)</label>
        <input
          id="weight"
          type="number"
          [(ngModel)]="triage.weight_kg"
          placeholder="Ej: 70"
          [readonly]="isReadOnly"
        />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="triage.smoker" [disabled]="isReadOnly" />
          Fumador
        </label>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="triage.drinker" [disabled]="isReadOnly" />
          Bebedor
        </label>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" [(ngModel)]="triage.practice_sport" [disabled]="isReadOnly" />
          Practica Deporte
        </label>
      </div>
    </div>

    <div class="form-group">
      <label for="consult-type">Tipo de Consulta</label>
      <input
        id="consult-type"
        type="text"
        [(ngModel)]="triage.consult_type"
        placeholder="Ej: Control rutinario"
        [readonly]="isReadOnly"
      />
    </div>

    <div class="form-group">
      <label for="congenital">Enfermedades Congénitas</label>
      <textarea
        id="congenital"
        rows="3"
        [(ngModel)]="triage.congenital_diseases"
        placeholder="Describa enfermedades congénitas..."
        [readonly]="isReadOnly"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="allergies">Alergias</label>
      <textarea
        id="allergies"
        rows="3"
        [(ngModel)]="triage.allergies"
        placeholder="Describa alergias..."
        [readonly]="isReadOnly"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="summary">Resumen</label>
      <textarea
        id="summary"
        rows="4"
        [(ngModel)]="triage.summary"
        placeholder="Resumen de la consulta..."
        [readonly]="isReadOnly"
      ></textarea>
    </div>

    <div class="form-actions centered">
      <button class="btn-save" *ngIf="!isReadOnly" (click)="updateTriage()">Actualizar Triage</button>
      <button class="btn-cancel" (click)="goBack()">{{ isReadOnly ? 'Cerrar' : 'Cancelar' }}</button>
    </div>
  </div>
</div>

